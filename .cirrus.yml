env:
    CIRRUS_CLONE_DEPTH: 1
    CIRRUS_WORKING_DIR: "/tmp/ci"

    ssh1: "ENCRYPTED[faa0818eca74e8606a7f3ec1ba190e8db0298d43bdf5d041194797f319ac603c6383df3f188789ddae62b06a4549e1b3]"
    ssh2: "ENCRYPTED[890d5b9d7c5fcabe7539258296ebdc053a99637accf12cc651aa958f7217a02b80f06d3a244cb8a212746ce4209b1119]"

task:
  name: Build_Upload
  timeout_in: 2h
  container:
    image: alpine/git
    cpu: .7
    memory: 1G
  config_script:
    - git config --global user.name "dopaemon"
    - git config --global user.email "polarisdp@gmail.com"
    - mkdir -p ~/.ssh
    - ssh-keyscan -H github.com >> ~/.ssh/known_hosts
    - touch ~/.ssh/id_ed25519.pub
    - touch ~/.ssh/id_ed25519
    - echo "$ssh2" > ~/.ssh/id_ed25519.pub
    - echo "$ssh1" > ~/.ssh/id_ed25519
  git_script:
    - git clone git@github.com:KernelPanic-OpenSource/KernelPanic-OpenSource.github.io.git ~/Repo
    - git clone https://github.com/dopaemon/KernelPanicPage ~/Repo1
  build_script:
    - cd ~/Repo
    - rm -rvf Packages.bz2
    - git rm Packages.bz2
    - bzip2 -zvk Packages
    - touch loop
    - echo "Loading..." >> loop
    - git add -v -A
    - git commit -sm "Update Packages"
  push_script:
    - cd ~/Repo
    - echo "yes" | git push -f origin master
  loop_script:
    - cd ~/Repo1
    - touch loop
    - echo "Loading..." >> loop
    - git add -v -A
    - git commit -sm "LoopCI"    
    - echo "yes" | git push -f origin master    
